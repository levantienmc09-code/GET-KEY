<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>GETKEY - V2</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
:root{
  --bg1:#0f172a;
  --bg2:#1e293b;
  --card:#1e293b80;
  --accent:#06b6d4;
  --accent2:#3b82f6;
  --white:#eef2f7;
  --muted:#94a3b8;
}
*{box-sizing:border-box;}
body{
  margin:0;
  font-family:'Inter',sans-serif;
  display:flex;
  height:100vh;
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  background-size:400% 400%;
  animation:bgAnim 15s ease infinite;
  color:var(--white);
}
@keyframes bgAnim{
  0%{background-position:0 0;}
  50%{background-position:100% 100%;}
  100%{background-position:0 0;}
}
.sidebar{
  width:180px;
  padding:24px 16px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:20px;
  border-right:1px solid rgba(255,255,255,0.1);
  background:rgba(15,23,42,0.6);
  backdrop-filter:blur(8px);
}
.brand{
  font-size:24px;
  font-weight:700;
  color:var(--accent);
  letter-spacing:2px;
}
.menuBtn{
  width:100%;
  padding:12px 0;
  border-radius:12px;
  border:none;
  cursor:pointer;
  font-weight:700;
  text-align:center;
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  color:#042025;
  font-size:16px;
  transition:0.3s;
}
.menuBtn:hover{opacity:0.9;}
.content{
  flex:1;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:32px;
}
.card{
  background:var(--card);
  padding:36px;
  border-radius:20px;
  max-width:600px;
  width:100%;
  text-align:center;
  box-shadow:0 20px 40px rgba(0,0,0,0.5);
  backdrop-filter:blur(10px);
  border:1px solid rgba(255,255,255,0.05);
}
h1{
  margin:0;
  font-size:32px;
  color:var(--accent);
  margin-bottom:14px;
}
.sub{
  color:var(--muted);
  margin-bottom:24px;
  font-size:14px;
}
input.keybox{
  font-family:monospace;
  font-size:22px;
  padding:16px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,0.1);
  background:rgba(255,255,255,0.05);
  color:var(--white);
  width:100%;
  text-align:center;
  letter-spacing:2px;
  transition:0.2s;
}
input.keybox:focus{
  outline:none;
  border:1px solid var(--accent);
  box-shadow:0 0 10px var(--accent2);
}
.row{
  margin-top:24px;
  display:flex;
  justify-content:center;
  gap:12px;
}
button.btn{
  padding:14px 20px;
  border-radius:14px;
  border:none;
  cursor:pointer;
  font-weight:700;
  font-size:16px;
  transition:0.3s;
}
.create{
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  color:#042025;
}
.create:hover{opacity:0.9;transform:scale(1.05);}
.copy{
  background:transparent;
  border:1px solid rgba(255,255,255,0.2);
  color:var(--white);
}
.copy:hover{opacity:0.85;transform:scale(1.03);}
.meta{
  margin-top:18px;
  font-size:14px;
  color:var(--muted);
}
.toast{
  position:fixed;
  right:18px;
  bottom:18px;
  background:#111827;
  color:#ffd6d6;
  padding:12px 18px;
  border-radius:12px;
  box-shadow:0 8px 28px rgba(0,0,0,0.6);
  display:none;
  z-index:9999;
  font-weight:600;
  font-size:14px;
}
@media(max-width:720px){
  .sidebar{display:none;}
  .card{margin:16px;}
}
</style>
</head>
<body>
<div class="sidebar">
  <div class="brand">GETKEY</div>
  <button class="menuBtn" id="menuCreate">TẠO KEY</button>
  <div style="flex:1;"></div>
  <div style="font-size:12px;color:var(--muted);text-align:center;">
    Letien09_ + 16 ký tự<br>Khóa 24h
  </div>
</div>

<div class="content">
  <div class="card">
    <h1>KEY FREE 24H</h1>
    <p class="sub">Nhấn <strong>TẠO KEY</strong> để lấy key 20 ký tự. Không tạo lại trong 24 giờ trên cùng thiết bị.</p>
    <input class="keybox" id="keyBox" placeholder="Chưa có key" readonly>
    <div class="row">
      <button class="btn create" id="createBtn">TẠO KEY</button>
      <button class="btn copy" id="copyBtn">Sao chép</button>
    </div>
    <div class="meta" id="metaText">Chưa có key — bấm TẠO KEY</div>
  </div>
</div>

<div class="toast" id="toast">Đã tạo key</div>

<script>
const STORAGE_KEY='letien_getkey_v3';
const KEY_PREFIX='Letien09_';
const RANDOM_LEN=16;
const TTL_MS=24*60*60*1000;
const MIN_CLICK_INTERVAL=3000;

const keyBox=document.getElementById('keyBox');
const createBtn=document.getElementById('createBtn');
const copyBtn=document.getElementById('copyBtn');
const metaText=document.getElementById('metaText');
const toast=document.getElementById('toast');
const menuCreate=document.getElementById('menuCreate');

let lastClick=0;
function randAlphanum(len){
  const alphabet='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
  const buf=new Uint8Array(len);
  crypto.getRandomValues(buf);
  let s='';
  for(let i=0;i<len;i++) s+=alphabet[buf[i]%alphabet.length];
  return s;
}
function saveStored(obj){ localStorage.setItem(STORAGE_KEY,JSON.stringify(obj)); }
function loadStored(){ try{return JSON.parse(localStorage.getItem(STORAGE_KEY));}catch(e){return null;} }
function showToast(text='Đã tạo key',ms=2200){
  toast.textContent=text;
  toast.style.display='block';
  setTimeout(()=>toast.style.display='none',ms);
}
function updateUI(){
  const st=loadStored();
  if(!st){ keyBox.value=''; metaText.textContent='Chưa có key — bấm TẠO KEY'; createBtn.disabled=false; return;}
  const expires=st.created+TTL_MS;
  if(Date.now()>=expires){ localStorage.removeItem(STORAGE_KEY); keyBox.value=''; metaText.innerHTML='<span style="color:#ff8a8a">Key hết hạn.</span> Bấm TẠO KEY để tạo lại.'; createBtn.disabled=false; return;}
  keyBox.value=st.key;
  const rem=expires-Date.now();
  const h=Math.floor(rem/(3600*1000));
  const m=Math.floor((rem%(3600*1000))/(60*1000));
  metaText.textContent=`Key hợp lệ — còn ${h} giờ ${m} phút.`;
  createBtn.disabled=true;
}
async function handleCreate(){
  const now=Date.now();
  if(now-lastClick<MIN_CLICK_INTERVAL) return;
  lastClick=now;
  const st=loadStored();
  if(st && (st.created+TTL_MS)>Date.now()){ showToast('Bạn đã có key hợp lệ — không thể tạo lại trong 24h',2500); return;}
  const key=KEY_PREFIX+randAlphanum(RANDOM_LEN);
  saveStored({key,created:Date.now()});
  keyBox.value=key;
  metaText.textContent='Key đã tạo — dùng được 24 giờ.';
  createBtn.disabled=true;
  showToast('Key đã tạo');
}
async function handleCopy(){
  if(!keyBox.value) return;
  try{ await navigator.clipboard.writeText(keyBox.value); metaText.textContent='Đã sao chép vào clipboard.'; }
  catch(e){ keyBox.select(); document.execCommand('copy'); metaText.textContent='Đã sao chép (fallback).'; }
}
createBtn.addEventListener('click',handleCreate);
menuCreate.addEventListener('click',handleCreate);
copyBtn.addEventListener('click',handleCopy);
updateUI();
window.addEventListener('contextmenu', e=>e.preventDefault());
window.addEventListener('keydown', e=>{ if(e.key==='F12') e.preventDefault(); if(e.ctrlKey && e.shiftKey && (e.key==='I'||e.key==='i')) e.preventDefault(); if(e.ctrlKey && (e.key==='U'||e.key==='u')) e.preventDefault();});
</script>
</body>
</html>
